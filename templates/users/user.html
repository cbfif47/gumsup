{% extends 'base.html' %}
{% load static %}
{% block title %}{{ user.username }} {% endblock %}

  {% block content %}
  <h2>{{ user.username }}</h2>
  <div class="userinfo">
    <div class="row">
    {{ user.username }} has been here since {{ user.created|date:"m/d/y" }}
    {% if user.is_private == False or is_following or request.user == user %}
      <li><a href="{% url 'followers' user %}">followers</a>: {{ user.follower_count}}</li>
      <li><a href="{% url 'following' user %}">following</a>: {{ user.following_count}}</li>
    {%  else %}
      <li>followers: {{ user.follower_count}}</li>
      <li>following: {{ user.following_count}}</li>
    {% endif %}
   </div>
   {% if request.user == user %}
    <div class="row">
      <form action="{% url 'privacy' user %}" method="post">
      {% csrf_token %}
      {% if user.is_private == False %}
        <input type="submit" value="make my profile private" onclick="clicked(event)">
      {% else %}
        <input type="submit" value="make my profile public" onclick="clicked(event)">
      {% endif %}
      </form>
    </div>
   {% endif %}
   {% if request.user != user %}
    <div class="row">
      "{{ user.bio|lower|default:'no bio :(' }}"
    </div>
  {% endif %}
  {% if form %}
    <form action="" method="post">
      {% csrf_token %}
      {{ form.as_p }}
      <input type="submit" value="save bio" id="post-button">
   </form>
   {% endif %}
   <div class="row">
      {% if request.user != user %}
          <form method="POST">
            {% csrf_token %}
            <input type="submit" id="post-button" value ='{{ button_text }}' />  
      {% endif %}
    </div>
  </div><br>
      {% if request.user == user or is_following %}
        {% include 'posts/feed.html' %}
      {% else %}
        <img src="{% static 'locked.png' %}" height="16px"> {{ user.username }} is private, but you can still request to follow.
      {% endif %}
    {% endblock %}