{% extends 'base.html' %}
{% block title %}{{ user.username }}{% endblock %}

  {% block content %}
    {%if user.username %}
    <h1>{{ user.username }}</h1>
    <div class="row">
      <div class="col-100">
        <button class="search-button"><a href="{% url 'user' request.user %}">view my profile</a></button>
        <button class="search-button"><a href="{% url 'edit-user' %}">edit my profile</a></button>
        <button class="search-button"><a href="{%url 'logout' %}">logout</a></button>
        {% if user.is_private %}
          <br><br>
            {% if follow_request_count == 1 %}<a href="{% url 'follow-requests' %}"><button class="secondary-button">1 new follow request</button></a>
            {% elif follow_request_count > 1 %}<a href="{% url 'follow-requests' %}"><button class="secondary-button">{{ follow_request_count }} new follow requests</button></a>
            {% else %}no new follow requests
            {% endif %}
        {% endif %}
      </div>
    </div><br>
    {% if activities %}
      {% for activity in activities %}
        {% if activity.original_seen %}
          <div class="activity-card">
        {% else %}
          <div class="activity-card unseen">
        {% endif %}
            <div class="row">
            {% if activity.follow %}
              <a href="{% url 'user' activity.follow.user %}">
                {{ activity.follow.user }}</a> followed you.
            {% elif activity.follow_request %}
              <a href="{% url 'user' activity.follow_request.following %}">
                {{ activity.follow_request.following }}</a> approved your follow request.
            {% elif activity.mention_item %}
              <a href="{% url 'user' activity.mention_item.user %}">
                {{ activity.mention_item.user }}</a> mentioned you in a post about 
                <a href="{% url 'view-item' activity.mention_item.id %}">{{ activity.mention_item.name }}</a>.
            {% elif activity.like_item %}
              <a href="{% url 'user' activity.like_item.user %}">
                {{ activity.like_item.user }}</a> liked your post about 
                <a href="{% url 'view-item' activity.like_item.item.id %}">{{ activity.like_item.item.name }}</a>.
            {% elif activity.save_item %}
              <a href="{% url 'user' activity.save_item.user %}">
                {{ activity.save_item.user }}</a> saved your post about 
                <a href="{% url 'view-item' activity.save_item.id %}">{{ activity.save_item.name }}</a>.
            {% endif %}
            <div class="row"><br>
                <div class="time-since">{{activity.created|timesince}} ago.</div>
            </div>
          </div>
        </div>
      {% endfor %}
  {% if activities.has_next %}
    <a href="?page={{ activities.next_page_number }}">more</a>
  {% endif %}
    {% else %}
      no follows or reposts yet. don't worry, the internet is meaningless!
    {% endif %}

    {% else %}
      <h1>hey!</h1>
      You don't have a username yet! <a href="{% url 'edit-user' %}">go fix that!</a>
      <br><br><br>you can also <a href="{%url 'logout' %}">logout</a> if you want.
    {% endif %}
  {% endblock %}