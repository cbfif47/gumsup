{% load static %}
<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="{% static 'main.css' %}" />
        <link rel="shortcut icon" type="image/png" href="{% static 'favicon.ico' %}" >
        <title>REX: {% block title %}{% endblock %}</title>
    </head>

    <body>
        <header class="header">
          {% if request.user.is_authenticated %}
            <breadcrumb>
              <a href="{%url 'home'%}" class="logo">FEED</a>
              <a href="{%url 'items' %}" class="logo">MINE</a>
              <a href="{%url 'item-lists' %}" class="logo">LISTS</a>
              <a href="{%url 'search-items' %}" class="logo">SEARCH</a>
              </breadcrumb>
          <user_greeting>
            {% if has_new_activity %}
                    <strong><a href="{% url 'activity' request.user %}">**{{ request.user|upper }}**</a></strong>
            {% else %}
                    <a href="{% url 'activity' request.user %}">{{ request.user|upper }}</a>
            {% endif %}
          </user_greeting>
          {% endif %}
        </header>
        <main>
            <div class="w3-container">
              {% if messages %}<br>
                {% for message in messages %}
                  <div class="alert alert-{{message.tags}}">
                         {{message}}
                  </div>
                {% endfor %}
              {% endif %}
            
             {%block content %}
             {%endblock content%}
            </div>
        </main>
        <footer class="footer">
        </footer>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script type="text/javascript">
function validateForm() {
      let x = document.forms["mainform"]["name"].value;
      if (x == "") {
        alert("Name must be filled out");
        return false;
      }
    }
    
  function clicked(e)
    {
        if(!confirm('Are you sure?')) {
            e.preventDefault();
        }
    }

    /* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
function openType() {
  document.getElementById("typeDropdown").classList.toggle("show");
}

function openList() {
  document.getElementById("listDropdown").classList.toggle("show");
}

// Close the dropdown menu if the user clicks outside of it
    window.onclick = function(event) {
      if (!event.target.matches('.dropbtn')) {
        var dropdowns = document.getElementsByClassName("dropdown-options");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }
      }
    }

$('.likebutton').click(function(){
    var catid;
    catid = $(this).attr("data-catid");
    $.ajax(
    {
        type:"GET",
        url: "/items/" + catid + "/like",
        data:{
                 item_id: catid
        },
        success: function( data ) 
        {
            $( '#like'+ catid ).text(data);
        }
     })
});
</script>

    </body>

</html>
